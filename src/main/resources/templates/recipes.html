<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Fridge Recipe</title>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
</head>
<body>
<nav class="navbar navbar-expand-md bg-dark navbar-dark">
    <!-- Brand -->
    <a class="navbar-brand" th:href="@{/foodpreferences}">Preferencje żywieniowe</a>
    <a class="navbar-brand" th:href="@{/foodpreferences/user-foodpreferences}">Ustaw preferencje</a>
    <a class="navbar-brand" th:href="@{/recipes}">Wszystkie przepisy</a>
    <a class="navbar-brand" th:href="@{/fridge}">Zawartość lodówki</a>
    <a class="navbar-brand" th:href="@{/recipes/filtered-prodcts}">Wyszukiwarka</a>
    <a class="navbar-brand" th:href="@{/shoppinglist}">Lista zakupów</a>

    </li>
    <!-- Toggler/collapsibe Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
</nav>

<div class="container">
    <div class="row">
        <h1> Przepisy </h1>
    </div>

    <div class="row">
        <div class="col-lg-2">
            <a th:href="@{/recipes/recipe}" class="btn btn-success mb-2"> Dodaj nowy przepis</a>
        </div>
        <div>
            <a th:href="@{/foodpreferences/recipe/}" class="btn btn-success mb-2"> Filtruj po alergenach</a>
        </div>
        <div class="dropdown">
            <form th:action="@{/recipes}">
                <select name="meal">
<!--                    FixMe poprawianie wygladu w dodawaniu tlumaczenia ENUMów-->
<!--                    <option th:hidden="${meal}" th:value="${meal}" th:text="${meal}"></option>-->
                    <option
                            th:each="meal : ${T(com.infoshareacademy.entity.recipe.Meal).values()}"
                            th:text="${meal.value}"
                            th:value="${meal}">
                    </option>
                </select>
                <button type="submit" class="btn btn-primary">Szukaj</button>
            </form>
        </div>
    </div>
    <div>
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
            <tr>
                <th> Tytuł</th>
                <th> Opis</th>
                <th> Czas przygotowania</th>
                <th> Składniki</th>
                <th> Rodzaj posiłku</th>
                <th> Opcje</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="recipe: ${recipes}">
                <td th:text="${recipe.name}"></td>
                <td th:text="${recipe.description}"></td>
                <td th:text="${recipe.preparationTime}"></td>
                <td th:text="${recipe.productList}"></td>
                <td th:text="${recipe.meal.value}"></td>
                <td>
                    <a th:href="@{/recipes/{recipeId}(recipeId=${recipe.recipeId})}"
                       class="btn btn-primary">Edytuj przepis</a>


                    <a th:href="@{/recipes/recipe/{id}(id=${recipe.recipeId})}"
                       class="btn btn-danger">Usuń przepis</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div>
        <ul class="pagination justify-content-center">
            <a class="page-link" th:if="${currentPage > 1}" th:href="@{'/recipes/page/' + ${currentPage - 1}}">Wstecz</a>
            <a class="page-link" th:unless="${currentPage > 1}">Wstecz</a>
            <!--            <a th:if="${currentPage > 1}" th:href="@{/recipes/page/1}" >Dalej</a>-->
            <!--        <span th:if="${currentPage > 1}" >Dalej</span>-->
            <span th:each="i: ${#numbers.sequence(1, totalPages)}">
          &nbsp; <a th:if="${i != currentPage}" th:href="@{'/recipes/page/' + ${i}}">[[${i}]] </a>
          <span th:unless="${i != currentPage}">[[${i}]] </span> &nbsp;
        </span>
            <a class="page-link" th:if="${currentPage < totalPages}" th:href="@{'/recipes/page/' + ${currentPage + 1}}">Dalej</a>
            <a class="page-link" th:unless="${currentPage < totalPages}">Dalej</a>
        </ul>

    </div>
    <div>
        Strona [[${currentPage}]] z [[${totalPages}]] </br>
        Ilość wszystkich przepisów w bazie: [[${totalRecipes}]]
    </div>
</div>
</body>
</html>